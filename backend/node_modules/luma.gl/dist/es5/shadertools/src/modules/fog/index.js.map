{"version":3,"sources":["../../../../../../src/shadertools/src/modules/fog/index.js"],"names":["name","getUniforms","fogEnable","fogColor","fogNear","fogFar","fog_uEnable","fog_uColor","fog_uNear","fog_uFar","vs","fs"],"mappings":";;;;;;;AAAO,IAAMA,IAAI,GAAG,KAAb;;;AAGA,SAASC,WAAT,GAKC;AAAA,iFAAJ,EAAI;AAAA,4BAJNC,SAIM;AAAA,MAJNA,SAIM,+BAJM,KAIN;AAAA,2BAHNC,QAGM;AAAA,MAHNA,QAGM,8BAHK,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAGL;AAAA,0BAFNC,OAEM;AAAA,MAFNA,OAEM,6BAFI,CAEJ;AAAA,yBADNC,MACM;AAAA,MADNA,MACM,4BADG,GACH;;AACN,SAAO;AACLC,IAAAA,WAAW,EAAEJ,SADR;AAELK,IAAAA,UAAU,EAAEJ,QAFP;AAGLK,IAAAA,SAAS,EAAEJ,OAHN;AAILK,IAAAA,QAAQ,EAAEJ;AAJL,GAAP;AAMD;;AAEM,IAAMK,EAAE,GAAG,EAAX;;AAEA,IAAMC,EAAE,gmBAAR","sourcesContent":["export const name = 'fog';\n\n/* eslint-disable camelcase */\nexport function getUniforms({\n  fogEnable = false,\n  fogColor = [0.5, 0.5, 0.5],\n  fogNear = 1,\n  fogFar = 100\n} = {}) {\n  return {\n    fog_uEnable: fogEnable,\n    fog_uColor: fogColor,\n    fog_uNear: fogNear,\n    fog_uFar: fogFar\n  };\n}\n\nexport const vs = '';\n\nexport const fs = `\\\n// fog configuration\nuniform bool fog_uEnable;\nuniform vec3 fog_uColor;\nuniform float fog_uNear;\nuniform float fog_uFar;\n\n/*\n * Applies linear fog to a color\n * param - unfogged color\n * return - fogged color\n */\nvec4 fog_filterColor(vec4 color) {\n  if (fog_uEnable) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fog_uNear, fog_uFar, depth);\n    return mix(color, vec4(fog_uColor, gl_FragColor.w), fogFactor);\n  } else {\n    return color;\n  }\n}\n\n// Other fog shaders, exponential etc, see\n// http://in2gpu.com/2014/07/22/create-fog-shader/\n`;\n"],"file":"index.js"}