{"version":3,"sources":["../../../../../src/shadertools/test/lib/resolve-modules.spec.js"],"names":["getDependencyGraph","TEST_EXPORTS","fp32","name","fp64","project","dependencies","project64","t","ok","resolveModules","undefined","end","result","deepEqual","map","module","moduleDepth","modules","level","moduleMap"],"mappings":";;AAAA;;AACA;;;;;;IACOA,kB,GAAsBC,4B,CAAtBD,kB;AAGP,IAAME,IAAI,GAAG;AACXC,EAAAA,IAAI,EAAE;AADK,CAAb;AAIA,IAAMC,IAAI,GAAG;AACXD,EAAAA,IAAI,EAAE;AADK,CAAb;AAIA,IAAME,OAAO,GAAG;AACdF,EAAAA,IAAI,EAAE,cADQ;AAEdG,EAAAA,YAAY,EAAE,CAACJ,IAAD;AAFA,CAAhB;AAKA,IAAMK,SAAS,GAAG;AAChBJ,EAAAA,IAAI,EAAE,gBADU;AAEhBG,EAAAA,YAAY,EAAE,CAACD,OAAD,EAAUD,IAAV;AAFE,CAAlB;AAKA,wBAAK,sBAAL,EAA6B,UAAAI,CAAC,EAAI;AAChCA,EAAAA,CAAC,CAACC,EAAF,CAAKC,mCAAmBC,SAAxB,EAAmC,kCAAnC;AACAH,EAAAA,CAAC,CAACC,EAAF,CAAKT,kBAAkB,KAAKW,SAA5B,EAAuC,sCAAvC;AACAH,EAAAA,CAAC,CAACI,GAAF;AACD,CAJD;AAMA,wBAAK,qCAAL,EAA4C,UAAAJ,CAAC,EAAI;AAC/C,MAAMK,MAAM,GAAG,oCAAe,CAACN,SAAD,EAAYF,OAAZ,CAAf,CAAf;AACAG,EAAAA,CAAC,CAACM,SAAF,CACED,MAAM,CAACE,GAAP,CAAW,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACb,IAAX;AAAA,GAAjB,CADF,EAEE,CAACD,IAAI,CAACC,IAAN,EAAYE,OAAO,CAACF,IAApB,EAA0BC,IAAI,CAACD,IAA/B,EAAqCI,SAAS,CAACJ,IAA/C,CAFF,EAGE,yBAHF;AAIAK,EAAAA,CAAC,CAACI,GAAF;AACD,CAPD;AASA,wBAAK,kCAAL,EAAyC,UAAAJ,CAAC,EAAI;AAAA;;AAC5C,MAAMS,WAAW,GAAG,EAApB;AACAjB,EAAAA,kBAAkB,CAAC;AACjBkB,IAAAA,OAAO,EAAE,CAACX,SAAD,EAAYF,OAAZ,CADQ;AAEjBc,IAAAA,KAAK,EAAE,CAFU;AAGjBC,IAAAA,SAAS,EAAE,EAHM;AAIjBH,IAAAA,WAAW,EAAXA;AAJiB,GAAD,CAAlB;AAMAT,EAAAA,CAAC,CAACM,SAAF,CAAYG,WAAZ,oDACGf,IAAI,CAACC,IADR,EACe,CADf,iCAEGE,OAAO,CAACF,IAFX,EAEkB,CAFlB,iCAGGC,IAAI,CAACD,IAHR,EAGe,CAHf,iCAIGI,SAAS,CAACJ,IAJb,EAIoB,CAJpB,kBAKG,8BALH;AAMAK,EAAAA,CAAC,CAACI,GAAF;AACD,CAfD","sourcesContent":["import test from 'tape-catch';\nimport {resolveModules, TEST_EXPORTS} from 'luma.gl/shadertools/src/lib/resolve-modules';\nconst {getDependencyGraph} = TEST_EXPORTS;\n\n// Dummy shader modules with dependencies\nconst fp32 = {\n  name: 'fp32-test'\n};\n\nconst fp64 = {\n  name: 'fp64-test'\n};\n\nconst project = {\n  name: 'project-test',\n  dependencies: [fp32]\n};\n\nconst project64 = {\n  name: 'project64-test',\n  dependencies: [project, fp64]\n};\n\ntest('ShaderModules#import', t => {\n  t.ok(resolveModules !== undefined, 'resolveModules import successful');\n  t.ok(getDependencyGraph !== undefined, 'getDependencyGraph import successful');\n  t.end();\n});\n\ntest('ShaderModules#getShaderDependencies', t => {\n  const result = resolveModules([project64, project]);\n  t.deepEqual(\n    result.map(module => module.name),\n    [fp32.name, project.name, fp64.name, project64.name],\n    'Module order is correct');\n  t.end();\n});\n\ntest('ShaderModules#getDependencyGraph', t => {\n  const moduleDepth = {};\n  getDependencyGraph({\n    modules: [project64, project],\n    level: 0,\n    moduleMap: {},\n    moduleDepth\n  });\n  t.deepEqual(moduleDepth, {\n    [fp32.name]: 2,\n    [project.name]: 1,\n    [fp64.name]: 1,\n    [project64.name]: 0\n  }, 'Module dependecny is correct');\n  t.end();\n});\n"],"file":"resolve-modules.spec.js"}