{"version":3,"sources":["../../../src/webgl-context/create-headless-context.js"],"names":["ERR_HEADLESSGL_NOT_AVAILABLE","ERR_HEADLESSGL_FAILED","createHeadlessContext","width","height","opts","onError","webgl1","webgl2","headlessGL","gl"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,4BAA4B,GAClC,sEADA;AAGA,IAAMC,qBAAqB,GAC3B,sEADA;;AAIO,SAASC,qBAAT,OAA+D;AAAA,MAA/BC,KAA+B,QAA/BA,KAA+B;AAAA,MAAxBC,MAAwB,QAAxBA,MAAwB;AAAA,MAAhBC,IAAgB,QAAhBA,IAAgB;AAAA,MAAVC,OAAU,QAAVA,OAAU;AAAA,MAC7DC,MAD6D,GAC3CF,IAD2C,CAC7DE,MAD6D;AAAA,MACrDC,MADqD,GAC3CH,IAD2C,CACrDG,MADqD;;AAEpE,MAAIA,MAAM,IAAI,CAACD,MAAf,EAAuB;AACrB,WAAOD,OAAO,CAAC,qCAAD,CAAd;AACD;;AACD,MAAI,CAACG,sBAAL,EAAiB;AACf,WAAOH,OAAO,CAACN,4BAAD,CAAd;AACD;;AACD,MAAMU,EAAE,GAAG,4BAAWP,KAAX,EAAkBC,MAAlB,EAA0BC,IAA1B,CAAX;;AACA,MAAI,CAACK,EAAL,EAAS;AACP,WAAOJ,OAAO,CAACL,qBAAD,CAAd;AACD;;AACD,SAAOS,EAAP;AACD","sourcesContent":["import {headlessGL} from '../webgl-utils/webgl-types';\n\nconst ERR_HEADLESSGL_NOT_AVAILABLE =\n'Failed to create WebGL context in Node.js, headless gl not available';\n\nconst ERR_HEADLESSGL_FAILED =\n'Failed to create WebGL context in Node.js, headless gl returned null';\n\n// Create headless gl context (for running under Node.js)\nexport function createHeadlessContext({width, height, opts, onError}) {\n  const {webgl1, webgl2} = opts;\n  if (webgl2 && !webgl1) {\n    return onError('headless-gl does not support WebGL2');\n  }\n  if (!headlessGL) {\n    return onError(ERR_HEADLESSGL_NOT_AVAILABLE);\n  }\n  const gl = headlessGL(width, height, opts);\n  if (!gl) {\n    return onError(ERR_HEADLESSGL_FAILED);\n  }\n  return gl;\n}\n"],"file":"create-headless-context.js"}