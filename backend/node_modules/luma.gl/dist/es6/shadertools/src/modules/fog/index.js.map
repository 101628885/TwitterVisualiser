{"version":3,"sources":["../../../../../../src/shadertools/src/modules/fog/index.js"],"names":["name","getUniforms","fogEnable","fogColor","fogNear","fogFar","fog_uEnable","fog_uColor","fog_uNear","fog_uFar","vs","fs"],"mappings":"AAAA,OAAO,MAAMA,IAAI,GAAG,KAAb;AAGP,OAAO,SAASC,WAAT,CAAqB;AAC1BC,EAAAA,SAAS,GAAG,KADc;AAE1BC,EAAAA,QAAQ,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFe;AAG1BC,EAAAA,OAAO,GAAG,CAHgB;AAI1BC,EAAAA,MAAM,GAAG;AAJiB,IAKxB,EALG,EAKC;AACN,SAAO;AACLC,IAAAA,WAAW,EAAEJ,SADR;AAELK,IAAAA,UAAU,EAAEJ,QAFP;AAGLK,IAAAA,SAAS,EAAEJ,OAHN;AAILK,IAAAA,QAAQ,EAAEJ;AAJL,GAAP;AAMD;AAED,OAAO,MAAMK,EAAE,GAAG,EAAX;AAEP,OAAO,MAAMC,EAAE,GAAI;;;;;;;;;;;;;;;;;;;;;;;;CAAZ","sourcesContent":["export const name = 'fog';\n\n/* eslint-disable camelcase */\nexport function getUniforms({\n  fogEnable = false,\n  fogColor = [0.5, 0.5, 0.5],\n  fogNear = 1,\n  fogFar = 100\n} = {}) {\n  return {\n    fog_uEnable: fogEnable,\n    fog_uColor: fogColor,\n    fog_uNear: fogNear,\n    fog_uFar: fogFar\n  };\n}\n\nexport const vs = '';\n\nexport const fs = `\\\n// fog configuration\nuniform bool fog_uEnable;\nuniform vec3 fog_uColor;\nuniform float fog_uNear;\nuniform float fog_uFar;\n\n/*\n * Applies linear fog to a color\n * param - unfogged color\n * return - fogged color\n */\nvec4 fog_filterColor(vec4 color) {\n  if (fog_uEnable) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fog_uNear, fog_uFar, depth);\n    return mix(color, vec4(fog_uColor, gl_FragColor.w), fogFactor);\n  } else {\n    return color;\n  }\n}\n\n// Other fog shaders, exponential etc, see\n// http://in2gpu.com/2014/07/22/create-fog-shader/\n`;\n"],"file":"index.js"}