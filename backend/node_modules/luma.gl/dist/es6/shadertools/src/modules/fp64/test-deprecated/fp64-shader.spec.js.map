{"version":3,"sources":["../../../../../../../src/shadertools/src/modules/fp64/test-deprecated/fp64-shader.spec.js"],"names":["document","window","Buffer","createGLContext","Program","setParameters","assembleShaders","registerShaderModules","fp64","BUFFER_DATA","Float32Array","glEnumToString","gl","value","p","toString","addSpan","contents","div","undefined","divs","body","getElementsByClassName","lastDiv","length","span","createElement","appendChild","innerHTML","addDiv","testInfoDiv","setAttribute","logToConsole","msg","console","log","escapeHTML","text","replace","testPassed","testFailed","glErrorShouldBe","glErrors","opt_msg","err","getError","ndx","indexOf","errStrs","ii","push","expected","join","fp64ify","a","a_hi","Math","fround","a_lo","getFloat64","upper","random","pow","getVec4Float64","getMat4Float64","result","i","initializeGL","canvas","viewport","width","height","clearColor","clearDepth","clear","initializeTexTarget","framebuffer","createFramebuffer","bindFramebuffer","tex","createTexture","bindTexture","texParameteri","texImage2D","renderbuffer","createRenderbuffer","bindRenderbuffer","renderbufferStorage","framebufferTexture2D","framebufferRenderbuffer","render","drawArrays","getGPUOutput","buf","readPixels","checkError","reference","currentDiv","line","referece64","result64","abs","test_float_add","testName","float0","float1","float_ref","float0_vec2","float1_vec2","float_ref_vec2","program","vs","require","fs","modules","setBuffers","positions","target","data","size","setUniforms","b","ONE","test_float_sub","test_float_mul","test_float_div","test_float_sqrt","sqrt","test_float_exp","exp","test_float_log","test_float_sin","sin","test_float_cos","cos","test_float_tan","tan","test_float_radians","PI","onload","idx0","test_no","loop","cpu_result","gpu_result"],"mappings":"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","sourcesContent":["// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// TODO - need to clean up this code to follow lint rules, disable for now\n/* eslint-disable */\n\nimport 'babel-polyfill';\n\nimport {document, window} from 'global';\nimport {Buffer, createGLContext, Program, setParameters, assembleShaders, registerShaderModules, fp64} from 'luma.gl';\n\nconst BUFFER_DATA = new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]);\n\n// Utilities functions that to be moved to a common place for future tests\n\nfunction glEnumToString(gl, value) {\n  // Optimization for the most common enum:\n  if (value === gl.NO_ERROR) {\n    return \"NO_ERROR\";\n  }\n  for (var p in gl) {\n    if (gl[p] == value) {\n      return p;\n    }\n  }\n  return \"0x\" + value.toString(16);\n};\n\nfunction addSpan(contents, div) {\n  if (div == undefined) {\n    var divs = document.body.getElementsByClassName(\"testInfo\");\n    var lastDiv = divs[divs.length - 1];\n    div = lastDiv;\n  }\n\n  var span = document.createElement(\"span\");\n  div.appendChild(span);\n  span.innerHTML = contents + '<br />';\n}\n\nfunction addDiv(contents) {\n  var testInfoDiv = document.createElement(\"div\");\n  document.body.appendChild(testInfoDiv);\n  testInfoDiv.setAttribute(\"class\", \"testInfo\");\n\n  return testInfoDiv;\n}\n\nfunction logToConsole(msg) {\n  if (window.console)\n    window.console.log(msg);\n}\n\nfunction escapeHTML(text) {\n  return text.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\");\n}\n\nfunction testPassed(msg) {\n  addSpan('<span><span class=\"pass\" style=\"color:green\">PASS</span> ' + escapeHTML(msg) + '</span>');\n  logToConsole('PASS ' + msg);\n}\n\nfunction testFailed(msg) {\n  addSpan('<span><span class=\"fail\" style=\"color:red\">FAIL</span> ' + escapeHTML(msg) + '</span>');\n  logToConsole('FAIL ' + msg);\n}\n\nfunction glErrorShouldBe(gl, glErrors, opt_msg) {\n  if (!glErrors.length) {\n    glErrors = [glErrors];\n  }\n  opt_msg = opt_msg || \"\";\n  var err = gl.getError();\n  var ndx = glErrors.indexOf(err);\n  var errStrs = [];\n  for (var ii = 0; ii < glErrors.length; ++ii) {\n    errStrs.push(glEnumToString(gl, glErrors[ii]));\n  }\n  var expected = errStrs.join(\" or \");\n  if (ndx < 0) {\n    var msg = \"getError expected\" + ((glErrors.length > 1) ? \" one of: \" : \": \");\n    testFailed(msg + expected +  \". Was \" + glEnumToString(gl, err) + \" : \" + opt_msg);\n  } else {\n    //var msg = \"getError was \" + ((glErrors.length > 1) ? \"one of: \" : \"expected value: \");\n    //testPassed(msg + expected + \" : \" + opt_msg);\n  }\n};\n\n// Special utility functions for df64 tests\n\nfunction fp64ify(a) {\n  const a_hi = Math.fround(a);\n  const a_lo = a - Math.fround(a);\n  return new Float32Array([a_hi, a_lo]);\n}\n\nfunction getFloat64(upper = 256) {\n  return Math.random() * Math.pow(2.0, (Math.random() - 0.5) * upper);\n}\n\nfunction getVec4Float64() {\n  return [getFloat64(), getFloat64(), getFloat64(), getFloat64()]\n}\n\nfunction getMat4Float64() {\n  var result = [];\n  for (var i = 0; i < 16; i++)\n  {\n    result.push(getFloat64());\n  }\n  return result;\n}\n\nfunction initializeGL(canvas)\n{\n  const gl = createGLContext(canvas);\n  setParameters(gl, {\n    viewport: [0, 0, canvas.width, canvas.height],\n    clearColor: [0, 0, 0, 1],\n    clearDepth: 1\n  });\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n  // var fp_texture_support = gl.getExtension('OES_texture_float');\n  // if (!fp_texture_support)\n  // {\n  //   console.error(\"no floating point texture support!\");\n  // }\n  return gl;\n}\n\nfunction initializeTexTarget(gl)\n{\n  var framebuffer = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n  framebuffer.width = 10;\n  framebuffer.height = 10;\n\n  var tex = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, tex);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA32F, framebuffer.width, framebuffer.height, 0, gl.RGBA, gl.FLOAT, null);\n\n  var renderbuffer = gl.createRenderbuffer();\n  gl.bindRenderbuffer(gl.RENDERBUFFER, renderbuffer);\n  gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, framebuffer.width, framebuffer.height);\n  gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, tex, 0);\n  gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, renderbuffer);\n\n}\n\nfunction render(gl)\n{\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n  glErrorShouldBe(gl, gl.NO_ERROR, \"no error from draw\");\n}\n\nfunction getGPUOutput(gl)\n{\n\n  var width = gl.canvas.width;\n  var height = gl.canvas.height;\n  var buf = new Float32Array(width * height * 4);\n\n  gl.readPixels(0, 0, width, height, gl.RGBA, gl.FLOAT, buf);\n\n  return buf;\n}\n\nfunction checkError(result, reference)\n{\n  var currentDiv = addDiv();\n  var line;\n  addSpan(\"------------------------\", currentDiv);\n\n  let referece64 = reference[0] + reference[1];\n  let result64 = result[0] + result[1];\n\n  line = 'CPU output: (' + reference[0].toString() + ',' + reference[1].toString() + ') = ' + referece64.toString() + '<br>';\n  addSpan(line, currentDiv);\n  line = \"GPU output: (\" + result[0].toString() + ',' + result[1].toString() + ',' + result[2].toString() + ',' + result[3].toString() + ') = ' + result64.toString() + '<br>';\n  addSpan(line, currentDiv);\n\n  line = \"error: \" + Math.abs((referece64 - result64) / referece64) + '<br>';\n  addSpan(line, currentDiv);\n\n\n  // var referenceBits = new Int32Array(reference.buffer);\n  // var resultBits = new Int32Array(result.buffer);\n\n  // var refHiExp = (referenceBits[0] & 0x7F800000) >>> 23;\n  // var refLoExp = (referenceBits[1] & 0x7F800000) >>> 23;\n  // var resHiExp = (resultBits[0] & 0x7F800000) >>> 23;\n  // var resLoExp = (resultBits[1] & 0x7F800000) >>> 23;\n\n  // var refHiMan = referenceBits[0] & 0x007FFFFF;\n  // var refLoMan = referenceBits[1] & 0x007FFFFF;\n  // var resHiMan = resultBits[0] & 0x007FFFFF;\n  // var resLoMan = resultBits[1] & 0x007FFFFF;\n\n  // if (refHiExp !== resHiExp || refLoExp !== resLoExp)\n  // {\n  //   line = \"High 8-bit exponent error: \" + Math.abs(refHiExp - resHiExp).toString() + \" ulp<br>\";\n  //   addSpan(line, currentDiv);\n  //   line = \"Low 8-bit exponent error: \" + Math.abs(refLoExp - resLoExp).toString() + \" ulp<br>\";\n  //   addSpan(line, currentDiv);\n  // }\n\n  // line = \"High 24-bit mantissa reference: \" + refHiMan.toString(2) + \" result: \" + resHiMan.toString(2) + \" error: \" + Math.abs(refHiMan - resHiMan).toString() + \" ulp<br>\";\n  // addSpan(line, currentDiv);\n  // line = \"Low 24-bit mantissa reference: \" + refLoMan.toString(2) + \" result: \" + resLoMan.toString(2) + \" error: \" + Math.abs(refLoMan - resLoMan).toString() + \" ulp<br>\";\n  // addSpan(line, currentDiv);\n}\n\n// Actual tests for different arithmetic functions\n\nfunction test_float_add(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // float +\n  const float0 = getFloat64();\n  const float1 = getFloat64();\n  const float_ref = float0 + float1;\n\n  const float0_vec2 = fp64ify(float0);\n  const float1_vec2 = fp64ify(float1);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n        vs: require('./vs_float_add.glsl'),\n        fs: require('./fs.glsl'),\n        modules: ['fp64']\n      }\n    ));\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    b: float1_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"(\" + float0_vec2.toString() + ') + (' + float1_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\nfunction test_float_sub(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // float -\n  const float0 = getFloat64();\n  const float1 = getFloat64();\n  const float_ref = float0 - float1;\n\n  const float0_vec2 = fp64ify(float0);\n  const float1_vec2 = fp64ify(float1);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n      vs: require('./vs_float_sub.glsl'),\n      fs: require('./fs.glsl'),\n      modules: ['fp64']\n    }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    b: float1_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"(\" + float0_vec2.toString() + ') - (' + float1_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\nfunction test_float_mul(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // float x\n  const float0 = getFloat64(128);\n  const float1 = getFloat64(128);\n\n  const float_ref = float0 * float1;\n\n  const float0_vec2 = fp64ify(float0);\n  const float1_vec2 = fp64ify(float1);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n    vs: require('./vs_float_mul.glsl'),\n    fs: require('./fs.glsl'),\n    modules: ['fp64']\n  }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    b: float1_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"(\" + float0_vec2.toString() + ') * (' + float1_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\nfunction test_float_div(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // float /\n  const float0 = getFloat64(128);\n  const float1 = getFloat64(128);\n  const float_ref = float0 / float1;\n\n  const float0_vec2 = fp64ify(float0);\n  const float1_vec2 = fp64ify(float1);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n    vs: require('./vs_float_div.glsl'),\n    fs: require('./fs.glsl'),\n    modules: ['fp64']\n  }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    b: float1_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"(\" + float0_vec2.toString() + ') / (' + float1_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\nfunction test_float_sqrt(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // sqrt\n  const float0 = getFloat64(128);\n  const float_ref = Math.sqrt(float0);\n\n  const float0_vec2 = fp64ify(float0);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n        vs: require('./vs_float_sqrt.glsl'),\n        fs: require('./fs.glsl'),\n        modules: ['fp64']\n      }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"sqrt(\" + float0_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\nfunction test_float_exp(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // exp\n  const float0 = getFloat64(6);\n  const float_ref = Math.exp(float0);\n\n  const float0_vec2 = fp64ify(float0);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n        vs: require('./vs_float_exp.glsl'),\n        fs: require('./fs.glsl'),\n        modules: ['fp64']\n      }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"exp(\" + float0_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\nfunction test_float_log(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // log\n  const float0 = getFloat64(24);\n  const float_ref = Math.log(float0);\n\n  const float0_vec2 = fp64ify(float0);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n        vs: require('./vs_float_log.glsl'),\n        fs: require('./fs.glsl'),\n        modules: ['fp64']\n      }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"log(\" + float0_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\n\nfunction test_float_sin(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // sin\n  const float0 = getFloat64(8);\n  const float_ref = Math.sin(float0);\n\n  const float0_vec2 = fp64ify(float0);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n        vs: require('./vs_float_sin.glsl'),\n        fs: require('./fs.glsl'),\n        modules: ['fp64']\n      }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"sin(\" + float0_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\nfunction test_float_cos(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // cos\n  const float0 = getFloat64(8);\n  const float_ref = Math.cos(float0);\n\n  const float0_vec2 = fp64ify(float0);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n        vs: require('./vs_float_cos.glsl'),\n        fs: require('./fs.glsl'),\n        modules: ['fp64']\n      }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"cos(\" + float0_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\nfunction test_float_tan(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // tan\n  const float0 = getFloat64(8);\n  const float_ref = Math.tan(float0);\n\n  const float0_vec2 = fp64ify(float0);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n        vs: require('./vs_float_tan.glsl'),\n        fs: require('./fs.glsl'),\n        modules: ['fp64']\n      }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"tan(\" + float0_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\nfunction test_float_radians(gl, testName) {\n  var currentDiv = addDiv();\n  addSpan(testName, currentDiv);\n\n // radians\n  const float0 = getFloat64(16);\n  const float_ref = float0 * Math.PI / 180.0;\n\n  const float0_vec2 = fp64ify(float0);\n  const float_ref_vec2 = fp64ify(float_ref);\n\n  const program = new Program(gl, assembleShaders(gl, {\n        vs: require('./vs_float_radians.glsl'),\n        fs: require('./fs.glsl'),\n        modules: ['fp64']\n      }));\n\n  program.setBuffers({\n    positions: new Buffer(gl, {target: gl.ARRAY_BUFFER, data: BUFFER_DATA, size: 2})\n  }).setUniforms({\n    a: float0_vec2,\n    ONE: 1.0\n  });\n\n  var line;\n  line = \"tan(\" + float0_vec2.toString() + ')<br>';\n  addSpan(line, currentDiv);\n  return float_ref_vec2;\n}\n\n// Main entrance\nwindow.onload = () => {\n  const canvas = document.createElement('canvas');\n  document.body.appendChild(canvas);\n\n  canvas.width = 16;\n  canvas.height = 16;\n\n  // Initialize GL\n\n  var gl = initializeGL(canvas);\n  initializeTexTarget(gl);\n\n\n  registerShaderModules([fp64]);\n\n  var idx0;\n  var test_no = 0;\n  const loop = 100;\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n    var cpu_result = test_float_add(gl, \"Float addition test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n  }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n    var cpu_result = test_float_sub(gl, \"Float subtraction test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n  }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n    var cpu_result = test_float_mul(gl, \"Float multiplication test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n  }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n    var cpu_result = test_float_div(gl, \"Float division test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n  }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n    var cpu_result = test_float_sqrt(gl, \"Float sqrt test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n  }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n    var cpu_result = test_float_exp(gl, \"Float exp test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n  }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n    var cpu_result = test_float_log(gl, \"Float log test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n  }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n    var cpu_result = test_float_sin(gl, \"Float sin test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n   }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n    var cpu_result = test_float_cos(gl, \"Float cos test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n\n\n  }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n\n    var cpu_result = test_float_tan(gl, \"Float tan test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n  }\n\n  for (idx0 = 0; idx0 < loop; idx0++) {\n    var currentDiv = addDiv();\n    addSpan(\"------------------------\", currentDiv);\n    addSpan(\"Loop No. \" + test_no++, currentDiv);\n\n\n    var cpu_result = test_float_radians(gl, \"Float radians test\");\n\n    render(gl);\n\n    var gpu_result = getGPUOutput(gl);\n\n    checkError(gpu_result, cpu_result);\n\n    addSpan(\"------------------------\", currentDiv);\n  }\n}\n"],"file":"fp64-shader.spec.js"}