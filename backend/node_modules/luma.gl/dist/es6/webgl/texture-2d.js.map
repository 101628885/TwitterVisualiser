{"version":3,"sources":["../../../src/webgl/texture-2d.js"],"names":["Texture","assertWebGLContext","Texture2D","isSupported","gl","opts","constructor","Object","assign","target","initialize","seal","bind","textureUnit","undefined","Error","activeTexture","bindTexture","handle","unbind","getActiveUnit","getParameter"],"mappings":"AACA,OAAOA,OAAP,MAAoB,WAApB;AACA,SAAQC,kBAAR,QAAiC,gBAAjC;AAEA,eAAe,MAAMC,SAAN,SAAwBF,OAAxB,CAAgC;AAE7C,SAAOG,WAAP,CAAmBC,EAAnB,EAAuBC,IAAvB,EAA6B;AAC3B,WAAOL,OAAO,CAACG,WAAR,CAAoBC,EAApB,EAAwBC,IAAxB,CAAP;AACD;;AAcDC,EAAAA,WAAW,CAACF,EAAD,EAAKC,IAAI,GAAG,EAAZ,EAAgB;AACzBJ,IAAAA,kBAAkB,CAACG,EAAD,CAAlB;AAEA,UAAMA,EAAN,EAAUG,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBH,IAAlB,EAAwB;AAACI,MAAAA,MAAM;AAAP,KAAxB,CAAV;AAEA,SAAKC,UAAL,CAAgBL,IAAhB;AAEAE,IAAAA,MAAM,CAACI,IAAP,CAAY,IAAZ;AACD;;AAaDC,EAAAA,IAAI,CAACC,WAAW,GAAG,KAAKA,WAApB,EAAiC;AAAA,UAC5BT,EAD4B,GACtB,IADsB,CAC5BA,EAD4B;;AAEnC,QAAIS,WAAW,KAAKC,SAApB,EAA+B;AAC7B,YAAM,IAAIC,KAAJ,CAAU,yCAAV,CAAN;AACD;;AACD,SAAKF,WAAL,GAAmBA,WAAnB;AACAT,IAAAA,EAAE,CAACY,aAAH,CAAiB,QAAcH,WAA/B;AACAT,IAAAA,EAAE,CAACa,WAAH,CAAe,KAAKR,MAApB,EAA4B,KAAKS,MAAjC;AACA,WAAOL,WAAP;AACD;;AAEDM,EAAAA,MAAM,GAAG;AAAA,UACAf,EADA,GACM,IADN,CACAA,EADA;;AAEP,QAAI,KAAKS,WAAL,KAAqBC,SAAzB,EAAoC;AAClC,YAAM,IAAIC,KAAJ,CAAU,4CAAV,CAAN;AACD;;AACDX,IAAAA,EAAE,CAACY,aAAH,CAAiB,QAAc,KAAKH,WAApC;AACAT,IAAAA,EAAE,CAACa,WAAH,CAAe,KAAKR,MAApB,EAA4B,IAA5B;AACA,WAAO,KAAKI,WAAZ;AACD;;AAEDO,EAAAA,aAAa,GAAG;AACd,WAAO,KAAKhB,EAAL,CAAQiB,YAAR,eAAP;AACD;;AA9D4C","sourcesContent":["import GL from '../constants';\nimport Texture from './texture';\nimport {assertWebGLContext} from '../webgl-utils';\n\nexport default class Texture2D extends Texture {\n\n  static isSupported(gl, opts) {\n    return Texture.isSupported(gl, opts);\n  }\n\n  /**\n   * @classdesc\n   * 2D WebGL Texture\n   * Note: Constructor will initialize your texture.\n   *\n   * @class\n   * @param {WebGLRenderingContext} gl - gl context\n   * @param {Image|ArrayBuffer|null} opts= - named options\n   * @param {Image|ArrayBuffer|null} opts.data= - buffer\n   * @param {GLint} width - width of texture\n   * @param {GLint} height - height of texture\n   */\n  constructor(gl, opts = {}) {\n    assertWebGLContext(gl);\n\n    super(gl, Object.assign({}, opts, {target: gl.TEXTURE_2D}));\n\n    this.initialize(opts);\n\n    Object.seal(this);\n  }\n\n  // target cannot be modified by bind:\n  // textures are special because when you first bind them to a target,\n  // they get special information. When you first bind a texture as a\n  // GL_TEXTURE_2D, you are actually setting special state in the texture.\n  // You are saying that this texture is a 2D texture.\n  // And it will always be a 2D texture; this state cannot be changed ever.\n  // If you have a texture that was first bound as a GL_TEXTURE_2D,\n  // you must always bind it as a GL_TEXTURE_2D;\n  // attempting to bind it as GL_TEXTURE_1D will give rise to an error\n  // (while run-time).\n\n  bind(textureUnit = this.textureUnit) {\n    const {gl} = this;\n    if (textureUnit === undefined) {\n      throw new Error('Texture.bind: must specify texture unit');\n    }\n    this.textureUnit = textureUnit;\n    gl.activeTexture(gl.TEXTURE0 + textureUnit);\n    gl.bindTexture(this.target, this.handle);\n    return textureUnit;\n  }\n\n  unbind() {\n    const {gl} = this;\n    if (this.textureUnit === undefined) {\n      throw new Error('Texture.unbind: texture unit not specified');\n    }\n    gl.activeTexture(gl.TEXTURE0 + this.textureUnit);\n    gl.bindTexture(this.target, null);\n    return this.textureUnit;\n  }\n\n  getActiveUnit() {\n    return this.gl.getParameter(GL.ACTIVE_TEXTURE) - GL.TEXTURE0;\n  }\n}\n"],"file":"texture-2d.js"}