{"version":3,"sources":["../../../../src/lib/utils/log-to-dom.js"],"names":["old","enableDOMLogging","enable","console","log","bind","logLineToDOM","logDiv","message","markdown","global","probe","document","createElement","childNodes","body","insertBefore","innerHTML"],"mappings":";;;;;;;;;AACA;;AAEA,IAAIA,GAAG,GAAG,IAAV;;AAGO,SAASC,gBAAT,GAAyC;AAAA,MAAfC,MAAe,uEAAN,IAAM;;AAE9C,MAAIA,MAAM,IAAI,CAACF,GAAf,EAAoB;AAClBA,IAAAA,GAAG,GAAGG,iBAAQC,GAAR,CAAYC,IAAZ,CAAiBF,gBAAjB,CAAN;;AACAA,qBAAQC,GAAR,GAAc,YAAa;AACzBE,MAAAA,YAAY,MAAZ;AACAN,MAAAA,GAAG,MAAH;AACD,KAHD;AAID;;AACD,MAAI,CAACE,MAAD,IAAWF,GAAf,EAAoB;AAClBG,qBAAQC,GAAR,GAAcJ,GAAd;AACAA,IAAAA,GAAG,GAAG,IAAN;AACD;AACF;;AAED,IAAIO,MAAM,GAAG,IAAb;;AAEO,SAASD,YAAT,CAAsBE,OAAtB,EAA+B;AACpC,MAAI,CAACD,MAAL,EAAa;AACX,QAAME,QAAQ,GAAGC,gBAAOC,KAAP,CAAaF,QAA9B;AACAF,IAAAA,MAAM,GAAGK,kBAASC,aAAT,CAAuBJ,QAAQ,GAAG,KAAH,GAAW,KAA1C,CAAT;AACD;;AAJmC,MAM7BK,UAN6B,GAMfF,kBAASG,IANM,CAM7BD,UAN6B;;AAOpCF,oBAASG,IAAT,CAAcC,YAAd,CAA2BT,MAA3B,EAAmCO,UAAU,IAAIA,UAAU,CAAC,CAAD,CAA3D;;AAGA,MAAI,OAAON,OAAP,KAAmB,QAAvB,EAAiC;AAC/BD,IAAAA,MAAM,CAACU,SAAP,cAAuBT,OAAvB;AACD;AACF;;eAEcP,gB","sourcesContent":["/* eslint-disable no-console */\nimport {document, console, global} from './globals';\n\nlet old = null;\n\n// Can log a (not too long) number of messages to a div in the DOM\nexport function enableDOMLogging(enable = true) {\n  // First time, add a log div\n  if (enable && !old) {\n    old = console.log.bind(console);\n    console.log = (...args) => {\n      logLineToDOM(...args);\n      old(...args);\n    };\n  }\n  if (!enable && old) {\n    console.log = old;\n    old = null;\n  }\n}\n\nlet logDiv = null;\n\nexport function logLineToDOM(message) {\n  if (!logDiv) {\n    const markdown = global.probe.markdown;\n    logDiv = document.createElement(markdown ? 'pre' : 'div');\n  }\n  // Ensure the element comes first\n  const {childNodes} = document.body;\n  document.body.insertBefore(logDiv, childNodes && childNodes[0]);\n\n  // Add the line to the log element\n  if (typeof message === 'string') {\n    logDiv.innerHTML += `${message}<br />`;\n  }\n}\n\nexport default enableDOMLogging;\n"],"file":"log-to-dom.js"}