{"version":3,"sources":["../../../../src/test-utils/image-utils/image-tools.js"],"names":["createImage","width","height","image","document","createElement","style","position","top","left","getImageFromContext","gl","drawingBufferWidth","drawingBufferHeight","Promise","resolve","onload","src","canvas","toDataURL","getImagePixelData","ctx","getContext","drawImage","getImageData"],"mappings":";;;;;;;;;AAIO,SAASA,WAAT,CAAqBC,KAArB,EAA4BC,MAA5B,EAAoC;AACzC,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAd;AACAF,EAAAA,KAAK,CAACF,KAAN,GAAcA,KAAd;AACAE,EAAAA,KAAK,CAACD,MAAN,GAAeA,MAAf;AACAC,EAAAA,KAAK,CAACG,KAAN,CAAYC,QAAZ,GAAuB,UAAvB;AACAJ,EAAAA,KAAK,CAACG,KAAN,CAAYE,GAAZ,GAAkB,CAAlB;AACAL,EAAAA,KAAK,CAACG,KAAN,CAAYG,IAAZ,GAAmB,CAAnB;AACA,SAAON,KAAP;AACD;;AAEM,SAASO,mBAAT,CAA6BC,EAA7B,EAAiC;AACtC,MAAMR,KAAK,GAAGH,WAAW,CAACW,EAAE,CAACC,kBAAJ,EAAwBD,EAAE,CAACE,mBAA3B,CAAzB;AACA,SAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5BZ,IAAAA,KAAK,CAACa,MAAN,GAAe,YAAM;AACnBD,MAAAA,OAAO,CAACZ,KAAD,CAAP;AACD,KAFD;;AAGAA,IAAAA,KAAK,CAACc,GAAN,GAAYN,EAAE,CAACO,MAAH,CAAUC,SAAV,EAAZ;AACD,GALM,CAAP;AAMD;;AAEM,SAASC,iBAAT,CAA2BjB,KAA3B,EAA+D;AAAA,MAA7BF,KAA6B,uEAArB,IAAqB;AAAA,MAAfC,MAAe,uEAAN,IAAM;AACpED,EAAAA,KAAK,GAAGA,KAAK,IAAIE,KAAK,CAACF,KAAvB;AACAC,EAAAA,MAAM,GAAGA,MAAM,IAAIC,KAAK,CAACD,MAAzB;AAEA,MAAMgB,MAAM,GAAGd,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAa,EAAAA,MAAM,CAACjB,KAAP,GAAeA,KAAf;AACAiB,EAAAA,MAAM,CAAChB,MAAP,GAAgBA,MAAhB;AACA,MAAMmB,GAAG,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAZ;AACAD,EAAAA,GAAG,CAACE,SAAJ,CAAcpB,KAAd,EAAqB,CAArB,EAAwB,CAAxB,EAA2BF,KAA3B,EAAkCC,MAAlC;AACA,SAAOmB,GAAG,CAACG,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuBvB,KAAvB,EAA8BC,MAA9B,CAAP;AACD","sourcesContent":["// EXPERIMENTAL IMAGE TOOLS\n// TODO - only works in browser\n/* global document */\n\nexport function createImage(width, height) {\n  const image = document.createElement('img');\n  image.width = width;\n  image.height = height;\n  image.style.position = 'absolute';\n  image.style.top = 0;\n  image.style.left = 0;\n  return image;\n}\n\nexport function getImageFromContext(gl) {\n  const image = createImage(gl.drawingBufferWidth, gl.drawingBufferHeight);\n  return new Promise(resolve => {\n    image.onload = () => {\n      resolve(image);\n    };\n    image.src = gl.canvas.toDataURL();\n  });\n}\n\nexport function getImagePixelData(image, width = null, height = null) {\n  width = width || image.width;\n  height = height || image.height;\n\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(image, 0, 0, width, height);\n  return ctx.getImageData(0, 0, width, height);\n}\n"],"file":"image-tools.js"}