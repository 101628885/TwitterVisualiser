{"version":3,"sources":["../../../src/lib/log.js"],"names":["VERSION","LocalStorage","getTimestamp","formatImage","formatTime","leftPad","addColor","autobind","isBrowser","assert","originalConsole","debug","console","log","info","warn","error","DEFAULT_SETTINGS","enabled","priority","noop","cache","getTableHeader","table","key","title","Log","constructor","id","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","userData","timeStamp","Object","seal","newPriority","updateConfiguration","config","isEnabled","getPriority","getLevel","getTotal","Number","toPrecision","getDelta","enable","setLevel","level","message","args","_getLogFunction","method","once","deprecated","oldUsage","newUsage","removed","probe","time","columns","tag","image","scale","_logImageInBrowser","_logImageInNode","asciify","module","require","fit","width","Math","round","then","data","img","Image","onload","src","element","nodeName","toLowerCase","toDataURL","timeEnd","group","opts","collapsed","_normalizeArguments","groupCollapsed","assign","groupEnd","withGroup","func","trace","_shouldLog","_normalizePriority","_getElapsedTime","total","delta","_parseArguments","_decorateMessage","bind","options","normOpts","resolvedPriority","isFinite","newOpts","undefined","unshift","color","background"],"mappings":"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","sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/* eslint-disable no-console, no-try-catch */\n/* global console */\nimport {VERSION} from './utils/globals';\nimport LocalStorage from './utils/local-storage';\nimport {getTimestamp} from './utils/timestamp';\nimport {formatImage, formatTime, leftPad} from './utils/formatters';\nimport {addColor} from './utils/color';\nimport {autobind} from './utils/autobind';\nimport {isBrowser} from './utils/globals';\nimport assert from '../lib/utils/assert';\n\n/* eslint-disable no-console */\n/* global console, Image */\n\n// Instrumentation in other packages may override console methods, so preserve them here\nconst originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\n\nconst DEFAULT_SETTINGS = {\n  enabled: false,\n  priority: 0\n};\n\nfunction noop() {}\n\nconst cache = {};\n\n/*\nfunction throttle(tag, timeout) {\n  const prevTime = cache[tag];\n  const time = Date.now();\n  if (!prevTime || (time - prevTime > timeout)) {\n    cache[tag] = time;\n    return true;\n  }\n  return false;\n}\n\n// Assertions don't generate standard exceptions and don't print nicely\nfunction checkForAssertionErrors(args) {\n  const isAssertion =\n    args &&\n    args.length > 0 &&\n    typeof args[0] === 'object' &&\n    args[0] !== null &&\n    args[0].name === 'AssertionError';\n\n  if (isAssertion) {\n    args = Array.prototype.slice.call(args);\n    args.unshift(`assert(${args[0].message})`);\n  }\n  return args;\n}\n*/\n\nfunction getTableHeader(table) {\n  for (const key in table) {\n    for (const title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n  return 'empty';\n}\n\n// A console wrapper\n\nexport default class Log {\n\n  constructor({id} = {}) {\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getTimestamp();\n    this._deltaTs = getTimestamp();\n    // TODO - fix support from throttling groups\n    this.LOG_THROTTLE_TIMEOUT = 0; // Time before throttled messages are logged again\n    this._storage = new LocalStorage(`__probe-${this.id}__`, DEFAULT_SETTINGS);\n    this.userData = {};\n\n    this.timeStamp(`${this.id} started`);\n\n    autobind(this);\n    Object.seal(this);\n  }\n\n  set priority(newPriority) {\n    this._storage.updateConfiguration({priority: newPriority});\n    return this;\n  }\n\n  get priority() {\n    return this._storage.config.priority;\n  }\n\n  isEnabled() {\n    return this._storage.config.enabled;\n  }\n\n  getPriority() {\n    return this._storage.config.priority;\n  }\n\n  getLevel() {\n    return this._storage.config.priority;\n  }\n\n  // @return {Number} milliseconds, with fractions\n  getTotal() {\n    return Number((getTimestamp() - this._startTs).toPrecision(10));\n  }\n\n  // @return {Number} milliseconds, with fractions\n  getDelta() {\n    return Number((getTimestamp() - this._deltaTs).toPrecision(10));\n  }\n\n  // Configure\n\n  enable(enabled = true) {\n    this._storage.updateConfiguration({enabled});\n    return this;\n  }\n\n  setLevel(level) {\n    this._storage.updateConfiguration({priority: level});\n    return this;\n  }\n\n  // Unconditional logging\n\n  // Warn, but only once, no console flooding\n  warn(message, ...args) {\n    return this._getLogFunction({\n      message,\n      args,\n      method: originalConsole.warn,\n      once: true\n    });\n  }\n\n  // Print an error\n  error(message, ...args) {\n    return this._getLogFunction({message, args, method: originalConsole.error});\n  }\n\n  deprecated(oldUsage, newUsage) {\n    return this.warn(`\\`${oldUsage}\\` is deprecated and will be removed \\\nin a later version. Use \\`${newUsage}\\` instead`);\n  }\n\n  removed(oldUsage, newUsage) {\n    return this.error(`\\`${oldUsage}\\` has been removed. Use \\`${newUsage}\\` instead`);\n  }\n\n  // Conditional logging\n\n  // Log to a group\n  probe(priority, message, ...args) {\n    return this._getLogFunction({\n      priority,\n      message,\n      args,\n      method: originalConsole.log,\n      time: true,\n      once: true\n    });\n  }\n\n  // Log a debug message\n  log(priority, message, ...args) {\n    return this._getLogFunction({\n      priority,\n      message,\n      args,\n      method: originalConsole.debug\n    });\n  }\n\n  // Log a normal message\n  info(priority, message, ...args) {\n    return this._getLogFunction({\n      priority, message, args,\n      method: console.info\n    });\n  }\n\n  // Log a normal message, but only once, no console flooding\n  once(priority, message, ...args) {\n    return this._getLogFunction({\n      priority,\n      message,\n      args,\n      method: originalConsole.debug || originalConsole.info,\n      once: true\n    });\n  }\n\n  // Logs an object as a table\n  table(priority, table, columns) {\n    if (table) {\n      const tag = getTableHeader(table);\n      return this._getLogFunction({\n        priority,\n        message: table,\n        args: columns && [columns],\n        tag,\n        method: console.table || noop\n      });\n    }\n    return noop;\n  }\n\n  // logs an image under Chrome\n  image({priority, image, message = '', scale = 1}) {\n    if (priority > this.getPriority()) {\n      return noop;\n    }\n    return isBrowser ?\n      this._logImageInBrowser({image, message, scale}) :\n      this._logImageInNode({image, message, scale});\n  }\n\n  // Use the asciify module to log an image under node.js\n  _logImageInNode({image, message = '', scale = 1}) {\n    // Note: Runtime load of the \"asciify-image\" module, avoids including in browser bundles\n    let asciify = null;\n    try {\n      asciify = module.require('asciify-image');\n    } catch (error) {\n      // asciify not installed, silently ignore\n    }\n    if (asciify) {\n      return () =>\n        asciify(image, {fit: 'box', width: `${Math.round(80 * scale)}%`})\n        .then(data => console.log(data));\n    }\n    return noop;\n  }\n\n  _logImageInBrowser({image, message = '', scale = 1}) {\n    if (typeof image === 'string') {\n      const img = new Image();\n      img.onload = () => {\n        const args = formatImage(img, message, scale);\n        console.log(...args);\n      };\n      img.src = image;\n      return noop;\n    }\n    const element = image.nodeName || '';\n    if (element.toLowerCase() === 'img') {\n      console.log(...formatImage(image, message, scale));\n      return noop;\n    }\n    if (element.toLowerCase() === 'canvas') {\n      const img = new Image();\n      img.onload = () => console.log(...formatImage(img, message, scale));\n      img.src = image.toDataURL();\n      return noop;\n    }\n    return noop;\n  }\n\n  time(priority, message) {\n    return this._getLogFunction({\n      priority,\n      message,\n      method: console.time ? console.time : console.info\n    });\n  }\n\n  timeEnd(priority, message) {\n    return this._getLogFunction({\n      priority,\n      message,\n      method: console.timeEnd ? console.timeEnd : console.info\n    });\n  }\n\n  timeStamp(priority, message) {\n    return this._getLogFunction({\n      priority,\n      message,\n      method: console.timeStamp || noop\n    });\n  }\n\n  group(priority, message, opts = {collapsed: false}) {\n    opts = this._normalizeArguments({priority, message, opts});\n    const {collapsed} = opts;\n    return this._getLogFunction({\n      priority,\n      message,\n      opts,\n      method: (collapsed ? console.groupCollapsed : console.group) || console.info\n    });\n  }\n\n  groupCollapsed(priority, message, opts = {}) {\n    return this.group(priority, message, Object.assign({}, opts, {collapsed: true}));\n  }\n\n  groupEnd(priority) {\n    return this._getLogFunction({\n      priority,\n      message: '',\n      method: console.groupEnd || noop\n    });\n  }\n\n  // EXPERIMENTAL\n\n  withGroup(priority, message, func) {\n    const opts = this._normalizeArguments({\n      priority,\n      message\n    });\n\n    this.group(opts);\n\n    try {\n      func();\n    } finally {\n      this.groupEnd(opts.message);\n    }\n  }\n\n  trace() {\n    if (console.trace) {\n      console.trace();\n    }\n  }\n\n  // PRIVATE METHODS\n\n  _shouldLog(priority) {\n    priority = this._normalizePriority(priority);\n    return priority === 0 || (this.isEnabled() && this.getPriority() >= priority);\n  }\n\n  _getElapsedTime() {\n    const total = this.getTotal();\n    const delta = this.getDelta();\n    // reset delta timer\n    this._deltaTs = getTimestamp();\n    return {total, delta};\n  }\n\n  _getLogFunction(opts) {\n    if (this._shouldLog(opts.priority)) {\n      const {method} = opts;\n\n      opts = this._parseArguments(opts);\n\n      assert(method);\n\n      let {message} = opts;\n      const tag = opts.tag || opts.message;\n\n      if (opts.once) {\n        if (!cache[tag]) {\n          cache[tag] = getTimestamp();\n        } else {\n          return noop;\n        }\n      }\n\n      // TODO - Make throttling work with groups\n      // if (opts.nothrottle || !throttle(tag, this.LOG_THROTTLE_TIMEOUT)) {\n      //   return noop;\n      // }\n\n      message = this._decorateMessage(message, opts);\n\n      // Bind console function so that it can be called after being returned\n      return method.bind(console, message, ...opts.args);\n    }\n\n    return noop;\n  }\n\n  _parseArguments(options) {\n    const normOpts = this._normalizeArguments(options);\n\n    const {delta, total} = this._getElapsedTime();\n\n    // normalized opts + timings\n    return Object.assign(options, normOpts, {\n      delta,\n      total\n    });\n  }\n\n  // Get priority from first argument:\n  // - log(priority, message, args) => priority\n  // - log(message, args) => 0\n  // - log({priority, ...}, message, args) => priority\n  // - log({priority, message, args}) => priority\n  _normalizePriority(priority) {\n    let resolvedPriority;\n\n    switch (typeof priority) {\n    case 'number':\n      resolvedPriority = priority;\n      break;\n\n    case 'object':\n      resolvedPriority = priority.priority || 0;\n      break;\n\n    default:\n      resolvedPriority = 0;\n    }\n    // 'log priority must be a number'\n    assert(Number.isFinite(resolvedPriority) && resolvedPriority >= 0);\n\n    return resolvedPriority;\n  }\n\n  // \"Normalizes\" the various argument patterns into an object with known types\n  // - log(priority, message, args) => {priority, message, args}\n  // - log(message, args) => {priority: 0, message, args}\n  // - log({priority, ...}, message, args) => {priority, message, args}\n  // - log({priority, message, args}) => {priority, message, args}\n  _normalizeArguments({priority, message, args = [], opts}) {\n    const newOpts = {\n      priority: this._normalizePriority(priority),\n      message,\n      args\n    };\n\n    switch (typeof priority) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n      Object.assign(newOpts, {message: priority});\n      break;\n\n    case 'object':\n      Object.assign(newOpts, priority);\n      break;\n\n    default:\n    }\n\n    // Resolve functions into strings by calling them\n    if (typeof newOpts.message === 'function') {\n      newOpts.message = this._shouldLog(newOpts.priority) ? newOpts.message() : '';\n    }\n    // 'log message must be a string' or object\n    assert(typeof newOpts.message === 'string' || typeof newOpts.message === 'object');\n\n    // original opts + normalized opts + opts arg + fixed up message\n    return Object.assign(newOpts, opts);\n  }\n\n  _decorateMessage(message, opts) {\n    if (typeof message === 'string') {\n      let time = '';\n      if (opts.time) {\n        const {total} = this._getElapsedTime();\n        time = leftPad(formatTime(total));\n      }\n      message = opts.time ? `${this.id}: ${time}  ${message}` : `${this.id}: ${message}`;\n      message = addColor(message, opts.color, opts.background);\n    }\n    return message;\n  }\n}\n\nLog.VERSION = VERSION;\n"],"file":"log.js"}