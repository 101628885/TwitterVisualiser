{"version":3,"sources":["../../../src/basic/ToastContainer.js"],"names":["ToastContainer","props","state","modalVisible","fadeAnim","Value","position","opacity","width","elevation","paddingHorizontal","OS","top","getTop","undefined","bottom","buttonText","trim","length","config","setState","text","getButtonText","type","supportedOrientations","style","buttonTextStyle","buttonStyle","textStyle","onClose","closeTimeout","clearTimeout","duration","setTimeout","closeToast","bind","timing","toValue","start","closeModal","getToastStyle","toastInstance","_root","showToast","propTypes","oneOfType","object","number","array","StyledToastContainer"],"mappings":"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","file":"ToastContainer.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { View, Modal, Platform, Animated, ViewPropTypes } from \"react-native\";\nimport { connectStyle } from \"native-base-shoutem-theme\";\nimport { Text } from \"./Text\";\nimport { Button } from \"./Button\";\nimport { ViewNB } from \"./View\";\nimport { Toast } from \"./Toast\";\nimport mapPropsToStyleNames from \"../Utils/mapPropsToStyleNames\";\n\nclass ToastContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalVisible: false,\n      fadeAnim: new Animated.Value(0)\n    };\n  }\n  static toastInstance;\n  static show({ ...config }) {\n    this.toastInstance._root.showToast({ config });\n  }\n  getToastStyle() {\n    return {\n      position: \"absolute\",\n      opacity: this.state.fadeAnim,\n      width: \"100%\",\n      elevation: 9,\n      paddingHorizontal: Platform.OS === \"ios\" ? 20 : 0,\n      top: this.state.position === \"top\" ? this.getTop() : undefined,\n      bottom: this.state.position === \"bottom\" ? this.getTop() : undefined\n    };\n  }\n  getTop() {\n    if (Platform.OS === \"ios\") {\n      return 30;\n    } else {\n      return 0;\n    }\n  }\n  getButtonText(buttonText) {\n    if (buttonText) {\n      if (buttonText.trim().length === 0) {\n        return undefined;\n      } else return buttonText;\n    }\n    return undefined;\n  }\n  showToast({ config }) {\n    this.setState({\n      modalVisible: true,\n      text: config.text,\n      buttonText: this.getButtonText(config.buttonText),\n      type: config.type,\n      position: config.position ? config.position : \"bottom\",\n      supportedOrientations: config.supportedOrientations,\n      style: config.style,\n      buttonTextStyle: config.buttonTextStyle,\n      buttonStyle: config.buttonStyle,\n      textStyle: config.textStyle,\n      onClose: config.onClose\n    });\n    // If we have a toast already open, cut off its close timeout so that it won't affect *this* toast.\n    if (this.closeTimeout) {\n      clearTimeout(this.closeTimeout)\n    }\n    const duration = (config.duration > 0) ? config.duration : 1500;\n    // Set the toast to close after the duration.\n    this.closeTimeout = setTimeout(this.closeToast.bind(this), duration);\n    // Fade the toast in now.\n    Animated.timing(this.state.fadeAnim, {\n      toValue: 1,\n      duration: 200\n    }).start();\n  }\n  closeModal() {\n    this.setState({\n      modalVisible: false\n    });\n    const { onClose } = this.state;\n    if(onClose && typeof onClose === \"function\") {\n      onClose();\n    }\n  }\n  closeToast() {\n    Animated.timing(this.state.fadeAnim, {\n      toValue: 0,\n      duration: 200\n    }).start(this.closeModal.bind(this));\n  }\n  render() {\n    if (this.state.modalVisible) {\n      return (\n        <Animated.View style={this.getToastStyle()}>\n          <Toast\n            style={this.state.style}\n            danger={this.state.type == \"danger\" ? true : false}\n            success={this.state.type == \"success\" ? true : false}\n            warning={this.state.type == \"warning\" ? true : false}\n          >\n            <Text style={this.state.textStyle}>{this.state.text}</Text>\n            {this.state.buttonText && (\n              <Button\n                style={this.state.buttonStyle}\n                onPress={() => this.closeToast()}\n              >\n                <Text style={this.state.buttonTextStyle}>\n                  {this.state.buttonText}\n                </Text>\n              </Button>\n            )}\n          </Toast>\n        </Animated.View>\n      );\n    } else return null;\n  }\n}\n\nToastContainer.propTypes = {\n  ...ViewPropTypes,\n  style: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.number,\n    PropTypes.array\n  ])\n};\n\nconst StyledToastContainer = connectStyle(\n  \"NativeBase.ToastContainer\",\n  {},\n  mapPropsToStyleNames\n)(ToastContainer);\n\nexport { StyledToastContainer as ToastContainer };\n"]}